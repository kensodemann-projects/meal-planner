import { findUnitOfMeasure } from '@/core/find-unit-of-measure';
import type { FoodItem, Portion } from '@/models/food';
import type { Recipe } from '@/models/recipe';
import type { UnitOfMeasure } from '@/models/unit-of-measure';
import type { FdcFoodSearchFoodItem } from '@/models/usda-fdc';

export const TEST_PORTION: Portion = {
  grams: 240,
  unitOfMeasure: findUnitOfMeasure('each'),
  units: 2,
  calories: 940,
  sodium: 2500,
  sugar: 3,
  carbs: 35,
  protein: 5,
  fat: 35,
};

export const TEST_FOOD: FoodItem = {
  name: 'Hot Dog',
  brand: "Jimmy's",
  fdcId: 429930,
  category: 'Meats',
  grams: 100,
  unitOfMeasure: findUnitOfMeasure('g'),
  units: 100,
  calories: 450,
  sodium: 1243,
  sugar: 6,
  carbs: 12,
  protein: 0,
  fat: 16,
  alternativePortions: [],
};

const makePortion = (units: number, uom: UnitOfMeasure, grams: number, calories: number): Portion => ({
  units,
  unitOfMeasure: uom,
  grams,
  calories,
  sodium: 0,
  fat: 0,
  protein: 0,
  carbs: 0,
  sugar: 0,
});

export const TEST_FOODS: FoodItem[] = [
  {
    id: '1',
    name: 'Classic Whole Milk',
    brand: 'Dairy Farm Co',
    category: 'Dairy',
    fdcId: 1100001,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 244,
    calories: 150,
    sodium: 125,
    fat: 8,
    protein: 8,
    carbs: 12,
    sugar: 12,
    alternativePortions: [makePortion(240, findUnitOfMeasure('g'), 240, 150)],
  },
  {
    id: '2',
    name: 'Large Brown Egg',
    brand: 'Free Range Eggs',
    category: 'Unknown',
    fdcId: 1100002,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 50,
    calories: 78,
    sodium: 62,
    fat: 5,
    protein: 6,
    carbs: 0.6,
    sugar: 0.6,
    alternativePortions: [makePortion(2, findUnitOfMeasure('each'), 100, 156)],
  },
  {
    id: '3',
    name: 'All-Purpose Flour',
    brand: 'Baker’s Best',
    category: 'Bakery',
    fdcId: 1100003,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 120,
    calories: 455,
    sodium: 2,
    fat: 1,
    protein: 13,
    carbs: 95,
    sugar: 0.3,
    alternativePortions: [makePortion(0.125, findUnitOfMeasure('each'), 15, 57)],
  },
  {
    id: '4',
    name: 'Granulated Sugar',
    brand: 'SweetLife',
    category: 'Sweets',
    fdcId: 1100004,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 200,
    calories: 774,
    sodium: 0,
    fat: 0,
    protein: 0,
    carbs: 200,
    sugar: 200,
    alternativePortions: [makePortion(1, findUnitOfMeasure('tbsp'), 12.5, 49)],
  },
  {
    id: '5',
    name: 'Russet Potato',
    brand: null,
    category: 'Produce',
    fdcId: 1100005,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 213,
    calories: 168,
    sodium: 17,
    fat: 0.2,
    protein: 4.6,
    carbs: 37,
    sugar: 2.1,
    alternativePortions: [makePortion(0.5, findUnitOfMeasure('each'), 106.5, 84)],
  },
  {
    id: '6',
    name: 'Boneless Skinless Chicken Breast',
    brand: 'Farm Fresh',
    category: 'Meats',
    fdcId: 1100006,
    units: 3,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 85,
    calories: 165,
    sodium: 74,
    fat: 3.6,
    protein: 31,
    carbs: 0,
    sugar: 0,
    alternativePortions: [makePortion(1, findUnitOfMeasure('each'), 28, 55)],
  },
  {
    id: '7',
    name: 'Extra Virgin Olive Oil',
    brand: 'Oliva',
    category: 'Fats & Oils',
    fdcId: 1100007,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('tbsp'),
    grams: 13.5,
    calories: 119,
    sodium: 0,
    fat: 13.5,
    protein: 0,
    carbs: 0,
    sugar: 0,
    alternativePortions: [makePortion(15, findUnitOfMeasure('g'), 15, 132)],
  },
  {
    id: '8',
    name: 'Plain Greek Yogurt',
    brand: 'Yogurt Co',
    category: 'Dairy',
    fdcId: 1100008,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 150,
    calories: 100,
    sodium: 50,
    fat: 0,
    protein: 17,
    carbs: 6,
    sugar: 4,
    alternativePortions: [makePortion(1, findUnitOfMeasure('c'), 245, 163)],
  },
];

export const TEST_FDC_FOODS: FdcFoodSearchFoodItem[] = TEST_FOODS.filter((f) => !!f.fdcId).map((f) => ({
  fdcId: f.fdcId!,
  description: f.name,
  foodCategory: f.category,
}));

export const TEST_RECIPES: Recipe[] = [
  {
    id: '1',
    name: 'Classic Spaghetti Carbonara',
    description:
      'A traditional Roman pasta dish made with eggs, hard cheese, cured pork (guanciale or pancetta), and black pepper.',
    category: 'Pasta',
    difficulty: 'Normal',
    servings: 4,
    servingSize: 1.5,
    servingSizeUnits: findUnitOfMeasure('cup'),
    servingGrams: 280,
    calories: 630,
    sodium: 780,
    sugar: 3,
    totalCarbs: 55,
    fat: 35,
    protein: 28,
    ingredients: [
      { units: 400, unitOfMeasure: findUnitOfMeasure('gram'), name: 'Spaghetti' },
      { units: 150, unitOfMeasure: findUnitOfMeasure('gram'), name: 'Guanciale or Pancetta' },
      { units: 2, unitOfMeasure: findUnitOfMeasure('item'), name: 'Large Eggs' },
      { units: 2, unitOfMeasure: findUnitOfMeasure('item'), name: 'Egg Yolks' },
      { units: 50, unitOfMeasure: findUnitOfMeasure('gram'), name: 'Pecorino Romano Cheese, grated' },
    ],
    steps: [
      'Cook spaghetti according to package directions.',
      'In a separate pan, cook the guanciale until crispy. Remove from heat.',
      'Whisk eggs, yolks, and Pecorino Romano cheese with plenty of black pepper.',
      'Drain pasta, reserving some pasta water. Immediately toss hot pasta with egg/cheese mixture and crispy guanciale, using reserved pasta water to create a creamy sauce.',
    ],
  },
  {
    id: '2',
    name: 'Simple Vinaigrette Salad',
    description: 'Fresh mixed greens with a tangy homemade balsamic vinaigrette.',
    category: 'Salad',
    difficulty: 'Easy',
    servings: 2,
    servingSize: 2,
    servingSizeUnits: findUnitOfMeasure('cup'),
    servingGrams: 150,
    calories: 120,
    sodium: 5,
    sugar: 2,
    totalCarbs: 8,
    fat: 9,
    protein: 3,
    ingredients: [
      { units: 6, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Mixed Greens' },
      { units: 3, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Olive Oil' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Balsamic Vinegar' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('tsp'), name: 'Dijon Mustard' },
    ],
    steps: [
      'Whisk together olive oil, balsamic vinegar, Dijon mustard, and salt/pepper to make the vinaigrette.',
      'Place mixed greens in a bowl.',
      'Drizzle vinaigrette over the greens and toss gently to coat.',
    ],
  },
  {
    id: '3',
    name: 'One-Pan Roasted Chicken and Vegetables',
    description: 'A healthy and easy dinner with perfectly seasoned chicken and root vegetables.',
    category: 'Poultry',
    difficulty: 'Easy',
    servings: 4,
    servingSize: 1,
    servingSizeUnits: findUnitOfMeasure('serving'),
    servingGrams: 400,
    calories: 480,
    sodium: 350,
    sugar: 7,
    totalCarbs: 25,
    fat: 25,
    protein: 40,
    ingredients: [
      { units: 4, unitOfMeasure: findUnitOfMeasure('item'), name: 'Chicken Thighs (bone-in, skin-on)' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('lb'), name: 'Mixed Root Vegetables (potatoes, carrots)' },
      { units: 2, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Olive Oil' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('tsp'), name: 'Dried Rosemary' },
    ],
    steps: [
      'Preheat oven to 400°F (200°C).',
      'Chop vegetables and toss them with olive oil, rosemary, salt, and pepper on a baking sheet.',
      'Place chicken thighs among the vegetables. Season chicken.',
      'Roast for 35-40 minutes, or until chicken is cooked through.',
    ],
  },
  {
    id: '4',
    name: 'Overnight Oats',
    description: 'A simple, no-cook breakfast made by soaking oats in milk overnight.',
    category: 'Breakfast',
    difficulty: 'Easy',
    servings: 1,
    servingSize: 1.5,
    servingSizeUnits: findUnitOfMeasure('cup'),
    servingGrams: 200,
    calories: 320,
    sodium: 100,
    sugar: 10,
    totalCarbs: 55,
    fat: 8,
    protein: 12,
    ingredients: [
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Rolled Oats' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Milk (Dairy or Non-Dairy)' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Chia Seeds' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Maple Syrup' },
    ],
    steps: [
      'Combine all ingredients in a jar or container.',
      'Stir well until thoroughly mixed.',
      'Refrigerate overnight (at least 8 hours).',
      'Enjoy cold, optionally topped with fruit or nuts.',
    ],
  },
  {
    id: '5',
    name: 'Classic Fudgy Brownies',
    description: 'Rich, dense, and fudgy chocolate brownies with a crackly top.',
    category: 'Dessert',
    difficulty: 'Normal',
    servings: 16,
    servingSize: 1,
    servingSizeUnits: findUnitOfMeasure('piece'),
    servingGrams: 60,
    calories: 250,
    sodium: 120,
    sugar: 25,
    totalCarbs: 35,
    fat: 12,
    protein: 3,
    ingredients: [
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Unsalted Butter' },
      { units: 4, unitOfMeasure: findUnitOfMeasure('oz'), name: 'Unsweetened Chocolate' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Granulated Sugar' },
      { units: 2, unitOfMeasure: findUnitOfMeasure('item'), name: 'Large Eggs' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'All-Purpose Flour' },
    ],
    steps: [
      'Preheat oven to 350°F (175°C). Line an 8x8 inch pan with parchment paper.',
      'Melt butter and chocolate together until smooth.',
      'Stir in sugar, then beat in eggs one at a time.',
      'Fold in flour and a pinch of salt. Pour batter into the prepared pan.',
      'Bake for 25-30 minutes. Cool completely before cutting.',
    ],
  },
  {
    id: '6',
    name: 'Spicy Black Bean Burgers',
    description: 'Hearty and flavorful homemade vegetarian burgers.',
    category: 'Vegetarian',
    difficulty: 'Normal',
    servings: 4,
    servingSize: 1,
    servingSizeUnits: findUnitOfMeasure('item'),
    servingGrams: 180,
    calories: 380,
    sodium: 400,
    sugar: 5,
    totalCarbs: 65,
    fat: 8,
    protein: 18,
    ingredients: [
      { units: 15, unitOfMeasure: findUnitOfMeasure('oz'), name: 'Black Beans, rinsed and drained' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Bread Crumbs' },
      { units: 0.25, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Chopped Onion' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('tsp'), name: 'Chili Powder' },
    ],
    steps: [
      'Mash black beans until chunky.',
      'Mix mashed beans with bread crumbs, onion, chili powder, and seasoning.',
      'Form mixture into 4 patties.',
      'Cook patties on a skillet or grill for 5-7 minutes per side.',
    ],
  },
  {
    id: '7',
    name: 'Creamy Tomato Soup',
    description: 'A velvety smooth and comforting tomato soup, perfect with grilled cheese.',
    category: 'Soup',
    difficulty: 'Easy',
    servings: 6,
    servingSize: 1.5,
    servingSizeUnits: findUnitOfMeasure('cup'),
    servingGrams: 300,
    calories: 150,
    sodium: 550,
    sugar: 8,
    totalCarbs: 20,
    fat: 6,
    protein: 4,
    ingredients: [
      { units: 28, unitOfMeasure: findUnitOfMeasure('oz'), name: 'Crushed Tomatoes' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Vegetable Broth' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Heavy Cream' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('item'), name: 'Chopped Onion' },
    ],
    steps: [
      'Sauté the onion until softened.',
      'Add crushed tomatoes and vegetable broth. Simmer for 15 minutes.',
      'Use an immersion blender to blend the soup until smooth (or transfer to a regular blender).',
      'Stir in heavy cream and heat through, but do not boil.',
    ],
  },
  {
    id: '8',
    name: 'Homemade Fresh Salsa (Pico de Gallo)',
    description: 'A classic, fresh, uncooked Mexican salsa.',
    category: 'Sauce',
    difficulty: 'Easy',
    servings: 8,
    servingSize: 0.25,
    servingSizeUnits: findUnitOfMeasure('cup'),
    servingGrams: 60,
    calories: 15,
    sodium: 10,
    sugar: 2,
    totalCarbs: 3,
    fat: 0,
    protein: 0,
    ingredients: [
      { units: 4, unitOfMeasure: findUnitOfMeasure('item'), name: 'Ripe Tomatoes, diced' },
      { units: 0.5, unitOfMeasure: findUnitOfMeasure('item'), name: 'Red Onion, finely diced' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('item'), name: 'Jalapeño, minced' },
      { units: 0.25, unitOfMeasure: findUnitOfMeasure('cup'), name: 'Fresh Cilantro, chopped' },
      { units: 1, unitOfMeasure: findUnitOfMeasure('item'), name: 'Lime, juiced' },
    ],
    steps: [
      'Combine all diced ingredients (tomatoes, onion, jalapeño, cilantro) in a bowl.',
      'Pour in the fresh lime juice and season generously with salt.',
      'Stir well and let sit for at least 15 minutes for flavors to meld before serving.',
    ],
  },
];

export const TEST_RECIPE: Recipe = {
  name: 'Pan-Seared Scallops with Lemon-Butter Sauce',
  description: 'Perfectly caramelized sea scallops served with a simple, bright lemon-butter reduction.',
  category: 'Seafood',
  difficulty: 'Advanced', // Requires precise timing for searing
  servings: 2,
  servingSize: 4,
  servingSizeUnits: findUnitOfMeasure('oz'),
  servingGrams: 120,
  calories: 300,
  sodium: 420,
  sugar: 1,
  totalCarbs: 3,
  fat: 18,
  protein: 30,
  ingredients: [
    { units: 8, unitOfMeasure: findUnitOfMeasure('oz'), name: 'Large Sea Scallops' },
    { units: 2, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Unsalted Butter' },
    { units: 1, unitOfMeasure: findUnitOfMeasure('tbsp'), name: 'Olive Oil' },
    { units: 0.5, unitOfMeasure: findUnitOfMeasure('item'), name: 'Lemon, juiced' },
  ],
  steps: [
    'Pat scallops completely dry with paper towels (this is critical for a good sear).',
    'Season scallops heavily with salt and pepper.',
    'Heat olive oil and 1 tablespoon of butter in a skillet over high heat until smoking.',
    'Place scallops in the hot pan, ensuring they do not touch. Sear for 1.5 to 2 minutes per side until deep golden brown.',
    'Remove scallops from the pan. Reduce heat, add remaining butter and lemon juice to the pan, scraping up any browned bits. Simmer briefly.',
    'Spoon the lemon-butter sauce over the scallops and serve immediately.',
  ],
};
