import type { FoodItem, Portion } from '@/models';
import type { UnitOfMeasure } from '@/models/unit-of-measure';
import { vi } from 'vitest';
import { ref } from 'vue';
import { findUnitOfMeasure } from '../unit-of-measure';

const makePortion = (units: number, uom: UnitOfMeasure, grams: number, calories: number): Portion => ({
  units,
  unitOfMeasure: uom,
  grams,
  calories,
  sodium: 0,
  fat: 0,
  protein: 0,
  carbs: 0,
  sugar: 0,
});

export const sampleFoodItems: FoodItem[] = [
  {
    id: '1',
    name: 'Classic Whole Milk',
    brand: 'Dairy Farm Co',
    category: 'Dairy',
    fdcId: 1100001,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 244,
    calories: 150,
    sodium: 125,
    fat: 8,
    protein: 8,
    carbs: 12,
    sugar: 12,
    alternativePortions: [makePortion(240, findUnitOfMeasure('g'), 240, 150)],
  },
  {
    id: '2',
    name: 'Large Brown Egg',
    brand: 'Free Range Eggs',
    category: 'Unknown',
    fdcId: 1100002,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 50,
    calories: 78,
    sodium: 62,
    fat: 5,
    protein: 6,
    carbs: 0.6,
    sugar: 0.6,
    alternativePortions: [makePortion(2, findUnitOfMeasure('each'), 100, 156)],
  },
  {
    id: '3',
    name: 'All-Purpose Flour',
    brand: 'Bakerâ€™s Best',
    category: 'Bakery',
    fdcId: 1100003,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 120,
    calories: 455,
    sodium: 2,
    fat: 1,
    protein: 13,
    carbs: 95,
    sugar: 0.3,
    alternativePortions: [makePortion(0.125, findUnitOfMeasure('each'), 15, 57)],
  },
  {
    id: '4',
    name: 'Granulated Sugar',
    brand: 'SweetLife',
    category: 'Sweets',
    fdcId: 1100004,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('c'),
    grams: 200,
    calories: 774,
    sodium: 0,
    fat: 0,
    protein: 0,
    carbs: 200,
    sugar: 200,
    alternativePortions: [makePortion(1, findUnitOfMeasure('tbsp'), 12.5, 49)],
  },
  {
    id: '5',
    name: 'Russet Potato',
    brand: null,
    category: 'Produce',
    fdcId: 1100005,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 213,
    calories: 168,
    sodium: 17,
    fat: 0.2,
    protein: 4.6,
    carbs: 37,
    sugar: 2.1,
    alternativePortions: [makePortion(0.5, findUnitOfMeasure('each'), 106.5, 84)],
  },
  {
    id: '6',
    name: 'Boneless Skinless Chicken Breast',
    brand: 'Farm Fresh',
    category: 'Meats',
    fdcId: 1100006,
    units: 3,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 85,
    calories: 165,
    sodium: 74,
    fat: 3.6,
    protein: 31,
    carbs: 0,
    sugar: 0,
    alternativePortions: [makePortion(1, findUnitOfMeasure('each'), 28, 55)],
  },
  {
    id: '7',
    name: 'Extra Virgin Olive Oil',
    brand: 'Oliva',
    category: 'Fats & Oils',
    fdcId: 1100007,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('tbsp'),
    grams: 13.5,
    calories: 119,
    sodium: 0,
    fat: 13.5,
    protein: 0,
    carbs: 0,
    sugar: 0,
    alternativePortions: [makePortion(15, findUnitOfMeasure('g'), 15, 132)],
  },
  {
    id: '8',
    name: 'Plain Greek Yogurt',
    brand: 'Yogurt Co',
    category: 'Dairy',
    fdcId: 1100008,
    units: 1,
    unitOfMeasure: findUnitOfMeasure('each'),
    grams: 150,
    calories: 100,
    sodium: 50,
    fat: 0,
    protein: 17,
    carbs: 6,
    sugar: 4,
    alternativePortions: [makePortion(1, findUnitOfMeasure('c'), 245, 163)],
  },
];

const addFood = vi.fn();
const removeFood = vi.fn();
const updateFood = vi.fn();
const foods = ref([]);

export const useFoodsData = vi.fn().mockReturnValue({
  addFood,
  foods,
  removeFood,
  updateFood,
});
